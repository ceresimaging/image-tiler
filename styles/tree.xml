<Map>
  <!--
    MarkersSymbolizer has comp-op="dst-over" so that imagery goes to the bottom,
    no matter when it is added
   -->
  <Style filter-mode="first" name="tree">
    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MaxScaleDenominator>999</MaxScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" stroke="#000" stroke-width="25" width="11" height="11" />
    </Rule>
    <Rule>
      <MaxScaleDenominator>999</MaxScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" stroke="#000" stroke-width="8" width="30" height="30" />
    </Rule>

    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MaxScaleDenominator>1999</MaxScaleDenominator>
      <MinScaleDenominator>999</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="8" height="8" />
    </Rule>
    <Rule>
      <MaxScaleDenominator>1999</MaxScaleDenominator>
      <MinScaleDenominator>999</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="16" height="16" />
    </Rule>

    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MaxScaleDenominator>2999</MaxScaleDenominator>
      <MinScaleDenominator>2000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="5" height="5" />
    </Rule>
    <Rule>
      <MaxScaleDenominator>2999</MaxScaleDenominator>
      <MinScaleDenominator>2000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="8" height="8" />
    </Rule>

    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MaxScaleDenominator>4999</MaxScaleDenominator>
      <MinScaleDenominator>3000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="3" height="3" />
    </Rule>
    <Rule>
      <MaxScaleDenominator>4999</MaxScaleDenominator>
      <MinScaleDenominator>3000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="5" height="5" />
    </Rule>

    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MaxScaleDenominator>14999</MaxScaleDenominator>
      <MinScaleDenominator>5000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="1.5" height="1.5" />
    </Rule>
    <Rule>
      <MaxScaleDenominator>14999</MaxScaleDenominator>
      <MinScaleDenominator>5000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="3" height="3" />
    </Rule>

    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MaxScaleDenominator>49999</MaxScaleDenominator>
      <MinScaleDenominator>15000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="0.75" height="0.75" />
    </Rule>
    <Rule>
      <MaxScaleDenominator>49999</MaxScaleDenominator>
      <MinScaleDenominator>15000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="1.5" height="1.5" />
    </Rule>

    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MaxScaleDenominator>99999</MaxScaleDenominator>
      <MinScaleDenominator>50000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="0.5" height="0.5" />
    </Rule>
    <Rule>
      <MaxScaleDenominator>99999</MaxScaleDenominator>
      <MinScaleDenominator>50000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="0.75" height="0.75" />
    </Rule>

    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MaxScaleDenominator>149999</MaxScaleDenominator>
      <MinScaleDenominator>100000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="0.25" height="0.25" />
    </Rule>
    <Rule>
      <MaxScaleDenominator>149999</MaxScaleDenominator>
      <MinScaleDenominator>100000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="0.5" height="0.5" />
    </Rule>

    <Rule>
      <Filter>
        ([crop_name] = 'Grape' and [crop_group] = 'Vines') or
        ([crop_name] = 'Christmas Tree' and [crop_group] = 'Trees')
      </Filter>
      <MinScaleDenominator>150000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="0.125" height="0.125" />
    </Rule>
    <Rule>
      <MinScaleDenominator>150000</MinScaleDenominator>
      <MarkersSymbolizer comp-op="dst-over" file="/srv/tiler/styles/images/tree.svg" allow-overlap="true" fill="[color]" width="0.25" height="0.25" />
    </Rule>
  </Style>
</Map>
